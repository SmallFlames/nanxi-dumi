---
title: 面试准备
group: 面试宝典
tocDepth: 6
toc: content
order: 1
---

### 1、你之前用的是什么操作系统，操作系统的版本是什么，内核版本号是多少

​    centos 7.9  3.10.0  centos6.x 2.6.32

### 2、开机自动执行命令或者自动运行服务如何做，写入到哪个配置文件

​    将所要执行的命令放到/etc/rc.local内
​    Linux操作系统启动完成最后执行的一个配置文件/etc/rc.local
​    首先要给rc.local执行权限
​    rc.local是一个软链接文件 类似windows的快捷方式

### 3、DNS的配置文件是哪个，系统日志文件在哪？

​    1）/etc/resolv.conf    2）/var/log/message

&emsp;特点: 网卡配置和resolv之间的关系
	1.如果网卡中配置了重启会覆盖resolv.conf
	2.如果网卡中不配置，则不会覆盖resolv.conf
	3.resolv.conf中修改的DNS是直接生效 不需要任何操作
	4.网卡中配置的DNS必须重启生效
	5.网卡和resolv.conf都可以配置备用DNS

### 4、网卡配置和resolv之间的关系

​    1）如果网卡中配置了重启会覆盖resolv.conf
​    2）如果网卡中不配置，则不会覆盖resolv.conf
​    3）resolv.conf中修改的DNS是直接生效 不需要任何操作
​    5）网卡中配置的DNS必须重启生效
​    6）网卡和resolv.conf都可以配置备用DNS

### 5、写出/etc/fstab每列的含义

​    第一列: uuid唯一标识 类似身份证号 系统给每个硬件都会自动分配一个UUID
​    或者是件的名称也可以
​    第二列: 表示挂载点 
​    第三列: 文件系统类型 xfs ext3 ext4 
​    第四列: 挂载参数选项 默认defaults
​    第五列: 是否备份系统DUMP不用  默认0
​    第六列: 开机是否自检         默认0

### 6、写出linux操作系统的运行级别

​    0  关机
​    1  单用户模式
​    2  多用户模式 不支持NFS
​    3  完全多用户 默认运行级别
​    4  保留待开发
​    5  桌面模式
​    6  重启模式

### 7、操作系统做过哪些优化？

​    SSH优化、时间同步、优化防火墙、关闭Selinux、
​    修改默认的YUM仓库、安装扩展仓库
​    安装常用的软件、创建普通用户

### 8、硬链接和软连接的区别

​    1)硬链接的inode号码相同，软链接inode不同
​    2)创建硬链接使用ln 创建软链接使用ln -s
​    3)硬链接不能跨文件系统,软链接可以跨文件系统
​    4)目录不能做硬链接，可以做软链接，文件既可以做硬链接也可以做软链接
​    5)删除硬链接文件不影响源文件，删除软链接文件不影响源文件
​    6)inode号为0则文件被删除(没有被进程所调用)，删除源文件影响软链接文件
​    7)硬链接和软链接都是普通文件可以使用rm删除

### 9、如果登录系统提示 -bash-4.2$ 如何解决？

​    复制/etc/skel/下面的.bash_profile和.bashrc解决
​    复制/etc/skel/下面所有的隐藏环境变量文件到家目录
​    -bash-4.2$ cp /etc/skel/.* .
​    普通用户可以复制管理员相关的文件吗？可以，只要可以查看就可以复制
​    复制后重新远程连接可以解决
​    或者使用. 或者source立刻让.bash_profile执行一次
​    -bash-4.2$ source .bash_profile	

### 10、创建一个为000权限的文件请问umask值是多少？ 666

​    文件的最高权限减去默认的umask值 666
​    目录的最高权限减去默认的uamsk值 777
​    注意: 如果umask有奇数位 需要加1

### 11、服务器内存满会杀死占用内存最高的进程，oom内存溢出

​    导致内存溢出的原因:
​    1)访问量大,增加内存
​    2)由于进程程序导致内存飙升（java）,查找程序的原因
​    3)由于业务的网络波动原因
​    4)内部服务器 内存不够用的时候临时使用swap解决

### 12、造成磁盘无法写入的原因

​    1）查看磁盘是否满了
​        inode号满12、
​        df -i
​        block满
​        df -h
​    2）系统没有开启postfix
​    3）程序运行过程中自动生成的小文件

### 13、怎么做磁盘分区

&emsp;我们一般是直接把磁盘格式化挂载使用，如果是系统分区的话，看情况，小于2T的使用fdisk命令，大于2T的使用parted命令

### 14、如何查找小文件多的目录

​    find / -type d -size +1M
​    #如何查找大文件
​    find / -type f -size +1G
​    #查找七天前的文件并删除
​    find / -type f -mtime +7 |xargs rm

### 15、查看整个目录及下面所有内容的大小

​    du -sh 

### 16、删除文件不释放磁盘空间

​    因为进程被调用的原因导致无法释放	

### 17、解决磁盘不够用

​    第一块磁盘不够用: 由于日志文件占用磁盘空间过大
​    /var/log/nginx/access.log  # 默认第一块磁盘空间100G
​    上面路径不变，解决磁盘不够用！
​    第一步: 增加一块磁盘 2T
​    第二步: 挂载磁盘
​    mkdir /data
​    mount /dev/sdb /data
​    第三步: 将access.log移动到新的磁盘
​    第四步: 做软链接
​    ln -s /data/access.log /var/log/nginx/access.log

### 18、DNS的解析流程

​    1.浏览器--->本地HOSTS-->LDNS--->
​    2.LDNS--->根 根返回 顶级域.com
​    3.LDNS--->顶级域  顶级域返回权威域
​    4.LDNS--->权威域服务器 权威域名返回 A记录解析对应的服务器IP地址
​    5.浏览器-->百度IP建立连接

### 19、三次握手

​    syn=1 seq=x 请求
​    -----------------> 相应
​    syn=1 ack=1 seq=y ack=x+1
​    <---------------------
​    ack=1 seq=x+1 ack=y+1
​    ----------------------> 建立连接    

### 20、http访问流程   （*）

&emsp;&emsp;浏览器会向服务器发送请求行、请求头和请求体，它包括了请求方法、请求URI和HTTP版本协议。服务器会返回响应行、响应头和响应体，包括协议版本和状态码。
    1、浏览器往服务器的443端口发起请求，请求携带了浏览器支持的加密算法。
    2、服务器收到请求，选择浏览器支持的加密算法。
    3、服务器将数字证书返回给浏览器，这里的数字证书可以是向机构申请的，也可以是自制的。
    4、浏览器进入数字证书认证环节，由浏览器内置的TLS完成的：
    4.1 首先浏览器会从内置的证书列表中索引，找到服务器下发证书对应的机构，如果没有找到，此时就会提示用户该证书是不是由权威机构颁发，是不可信任的。如果查到了对应的机构，则取出该机构颁发的公钥。
    4.2 用机构的证书公钥解密得到证书的内容和证书签名，浏览器会验证证书签名的合法性，验证证书记录的网址和证书有效期，这些都通过认证时，就可以使用证书中的公钥了。
    4.3 浏览器生成一个随机数R，并使用网站公钥对R进行加密。传送给服务器。
    5、服务器用自己的私钥解密得到R。以R为密钥加密网页内容并传输给浏览器.
    6、浏览器以R为密钥使用解密算法获取网页内容。

### 21、HTTPS的加密流程

1、浏览器发起往服务器的443端口发起请求，请求携带了浏览器支持的加密算法和哈希算法。
2、服务器收到请求，选择浏览器支持的加密算法和哈希算法。
3、服务器下将数字证书返回给浏览器，这里的数字证书可以是向某个可靠机构申请的，也可以是自制的。
4、浏览器进入数字证书认证环节，这一部分是浏览器内置的TLS完成的：
4.1 首先浏览器会从内置的证书列表中索引，找到服务器下发证书对应的机构，如果没有找到，此时就会提示用户该证书是不是由权威机构颁发，是不可信任的。如果查到了对应的机构，则取出该机构颁发的公钥。
4.2 用机构的证书公钥解密得到证书的内容和证书签名，内容包括网站的网址、网站的公钥、证书的有效期等。浏览器会先验证证书签名的合法性（验证过程类似上面Bob和Susan的通信）。签名通过后，浏览器验证证书记录的网址是否和当前网址是一致的，不一致会提示用户。如果网址一致会检查证书有效期，证书过期了也会提示用户。这些都通过认证时，浏览器就可以安全使用证书中的网站公钥了。
4.3 浏览器生成一个随机数R，并使用网站公钥对R进行加密。
5、浏览器将加密的R传送给服务器。
6、服务器用自己的私钥解密得到R。
7、服务器以R为密钥使用了对称加密算法加密网页内容并传输给浏览器。
8、浏览器以R为密钥使用之前约定好的解密算法获取网页内容。

### 22、nginx和php运行原理

​    Nginx就是通过反向代理功能将动态请求转向后端Php-fpm。加载nginx的fast-cgi模块，php-fpm 接收到请求，启用worker进程处理请求，php-fpm 处理完请求，返回给nginx。

### 23、四次挥手

​    fin(seq=a)
​    ------------>
​    ack(seq=a+1)
​    <-----------
​    fin(seq=b ack=a+1)
​    <-----------------
​    ack(seq=b+1)
​    ------------>

### 24、OSI七层模型   TCP/IP四层模型

| OSI七层模型 | OSI五层    | TCP/IP四层模型 |
| ----------- | ---------- | -------------- |
| 应用层      |            |                |
| 表示层      |            |                |
| 会话层      | 应用层     |                |
| 传输层      | 传输层     | 应用层         |
| 网络层      | 网络层     | 主机到主机层   |
| 数据链路层  | 数据链路层 | 因特网层       |
| 物理层      | 物理层     | 网络接入层     |

### ~~25、https在那一层实现的数据加密     表示层~~

### 26、什么是CDN

​    在用户访问相对集中的地区和网络设置一些缓存服务器。当用户访问网站时，利用全局的负载均衡技术将用户的访问指向距离最近的缓存服务器，由缓存服务器代替源站响应用户的访问请求。缓存服务器就是cdn。

### 27、负载均衡的调度算法

​    1）轮询
​    2）weight加权轮询
​    3）ip_hash源地址哈希法
​    4）url_hash
​    5）最小连接数

### 28、负载均衡如何实现

​    使用upstream模块添加后端所要代理服务器的ip地址，默认是rr轮询，在server模块内添加proxy_pass 定义的空间名称 即可实现负载均衡

### 29、LVS的三种模式是？

​    1）NAT模式 类似Nginx代理模式
​    2）DR模式  转发模式
​    3）TUN模式

### 30、nginx和Apache的区别 为什么你们公司用nginx 不用 Apache

​    1)Apache是同步多进程模型，一个连接对应一个进程，而Nginx是异步的，多个连接（万级别）可以对应一个进程。
​      Nginx轻量级，抗并发，处理静态文件好。
​      Apache超稳定，对PHP支持比较简单，Nginx需要配合其他后端用，处理动态请求有优势.
​    2)nginx好用

### 31、nginx性能优化

​    1）添加CPU亲和、调整worker进程数
​    2）开启keepalive长连接
​    3）配置防盗链、以及跨域访问
​    4）限制nginx错误页面
​    5）限制单IP并发连接，以及http请求
​    6）开启静态文件expires缓存

### 32、nginx location 匹配规则

​    1）= 开头表示精确匹配
​    2）^~ 开头表示uri以某个常规字符串开头，理解为匹配url路径即可(非正则)
​    3）~ 开头表示区分大小写的正则匹配
​    4）~* 开头表示不区分大小写的正则匹配
​    5）!~和!~*分别为区分大小写不匹配及不区分大小写不匹配的正则
​    6）/ 通用匹配，任何请求都会匹配到

### 33、写一个制定监听端口的server

​    server{
​      listen 端口号；
​      server_name xxx.xxx.com;
​      location / {
​        root /code;
​        index index.html;
​      }
​    }

### 34、统计nginx日志访问IP top10

​    cat access.log-20231222  | awk '{print $1}' | sort | uniq -c | sort -rn | awk '{print $2}' | head -10

### 35、php_fastcgi访问原理

​    Nginx 不支持对外部程序的直接调用或者解析，所有的外部程序（包括PHP）必须通过FastCGI接口来调用。FastCGI接口在Linux下是 socket，（这个socket可以是文件socket，也可以是ip socket）。为了调用CGI程序，还需要一个FastCGI的wrapper（wrapper可以理解为用于启动另一个程序的程序），这个 wrapper绑定在某个固定socket上，如端口或者文件socket。当Nginx将CGI请求发送给这个socket的时候，通过FastCGI 接口，wrapper接纳到请求，然后派生出一个新的线程，这个线程调用解释器或者外部程序处理脚本并读取返回数据；接着，wrapper再将返回的数据 通过FastCGI接口，沿着固定的socket传递给Nginx；最后，Nginx将返回的数据发送给客户端，这就是Nginx+FastCGI的整个 运作过程。

### 36、Nginx配置文件组成及其作用

​    Nginx的配置文件每一行就是一条命令。
​    最外层的为核心模块的配置参数（类型：NGX_CORE_MODULE）；内部嵌套的为各个子模块的配置。
​    events {} 为事件模块（类型：NGX_EVENT_MODULE）
​    http {} 为HTTP模块 （类型：NGX_HTTP_MODULE）
​    http模块内还会嵌套多层

### 37、如何实现会话保持

​    1）使用nginx的ip_hash，根据客户端的IP，将请求分配到对应的IP上
​    2）基于服务端的session会话共享（NFS，MySQL，memcache，redis，file）

### 38、简述raid0、raid1、raid6三种工作模式的工作原理及特点?

​    1）至少需要两块硬盘，磁盘越多，读写速度最快，没有冗余。
​        它将多块磁盘组合在一起形成一个大容量的存储。当我们要写数据的时候，会将数据分为N份，以独立的方式实现N块磁盘的读写，那么这N份数据会同时并发的写到磁盘中，因此执行性能非常的高。
​    2）只能用两块硬盘，两块硬盘的数据互为镜像(写慢，读快)，一块磁盘冗余。
​        它的原理是在往磁盘写数据的时候，将同一份数据无差别的写两份到磁盘，分别写到工作磁盘和镜像磁盘，那么它的实际空间使用率只有50%了，两块磁盘当做一块用。
​    3）至少需要4块硬盘，2块磁盘冗余,硬盘的总数大于等于4即可。
​        RAID6的工作原理是采用两个独立的奇偶校验进行数据的冗余备份。每个数据块分别写入到多个硬盘中，并通过两个不同的函数计算出两个奇偶校验值。其中一个奇偶校验值被存储在一个硬盘中，而另一个奇偶校验值则被存储在另一个硬盘中。当其中一块硬盘发生故障时，RAID6可以通过另外的奇偶校验值恢复数据。

### 38、mysql的innodb如何定位锁问题，mysql如何减少主从复制延迟?

### 39、服务器性能指标都有哪些，使用哪些工具查看?

​    1）CPU使用率
​    2）系统平均负载
​    3）内存使用率
​    4）磁盘使用率
​    可以用Zabbix、Prometheus等工具，或者用free w top vim /proc/meminfo等命令直接查看.

### 40、php 运行都有哪些模式，都有什么优缺点，如何与 http 服务器进行配合?

​    1）CGI模式
​       是一种以进程方式运行的模式，每次请求都将启动一个新的PHP进程，处理完请求后自动退出。因此，CGI模式的优点是容易控制进程资源的使用，可以使用各种语言编写CGI程序，时限性好。但缺点是每个请求都需要启动新的进程，对于大型的网站，请求量大时可能出现处理不过来的情况。 
​    2）FastCGI模式
​       模块模式是一种在Web服务器中作为模块加载和运行的模式。它可以很好地利用Web服务器的函数库，并与Web服务器进行更紧密的协作。优点是效率高，一直保持运行状态，响应速度快，适合处理多用户请求的情况。但缺点是不便于控制进程资源的使用。 
​    3）CLI模式 
​       是指PHP在命令行下运行的模式。CLI模式可以很方便地用于系统管理、定时任务等脚本编写和管理。PHP CLI可以在没有Web服务器和浏览器的情况下直接运行，对于一些需要在命令行下运行的程序非常方便。 
​    4）模块模式 
​       是一种在Web服务器中作为模块加载和运行的模式。它可以很好地利用Web服务器的函数库，并与Web服务器进行更紧密的协作。优点是效率高，一直保持运行状态，响应速度快，适合处理多用户请求的情况。但缺点是不便于控制进程资源的使用。 
​    5）嵌入模式 
​       是指在其他应用程序中嵌入PHP解析器的模式。嵌入模式可以使应用程序具有动态代码执行的功能，扩展应用程序的功能和灵活性，非常适合一些需要动态生成内容的应用程序。但嵌入模式需要对应用程序进行复杂的编译过程，且存在安全性问题。

### 41、如何设置nginx多域名？

​    可以直接在http模块中写多个server，每一个server对应的serve_name都不相同。

### 42、Linux sudo是什么，如何进行sudo控制设置?

​    1）sudo是linux下常用的允许普通用户使用超级用户权限的工具，允许系统管理员让普通用户执行一些root命令
​    2）通过 修改/etc/sudoers添加授权普通用户所使用的的root命令

### 43、什么是高可用，如何做到高可用，高可用有没有缺点?

​    1）一般是指2台机器启动着完全相同的业务系统，当有一台机器down机了，另外一台服务器就能快速的接管，对于访问的用户是无感知的。通过keepalived便可。
​    2）keepalived软件是基于VRRP协议实现的，VRRP虚拟路由冗余协议。
​    3）性能较低，相比于 LVS，Keepalived 的性能较差。
​       不支持直接转发，需要通过TCP代理实现转发。
​       不支持SSL加密。

### 44、描述物理盘分区块扇区，挂载的概念，如何能做到很方便的加盘扩容?

​    1）是指磁盘上划分的区域。磁盘上的每个磁道被等分为若干个弧段，这些弧段便是磁盘的扇区，硬盘的读写以扇区为基本单位。
​    2）将一个设备（通常是存储设备）挂接到一个已存在的目录上。
​    3）直接在服务器上插入一个磁盘，分区，格式化，挂载

### 45、都使用过哪些虚拟化平台，都有什么优缺点，虚拟化本身有什么优缺点?

​    1） VirtualBox、VMware 
​    2） VMware更适合企业级用户，因为它提供了更多的高级功能，如 vMotion（在线迁移）、vSAN（超融合）、HA（高可用）、DRS(分布式资源调度) 、FT(连续可用性) 等。VMware 的性能比 VirtualBox 更好，但这也成了缺点。因为它需要更高的硬件配置。VirtualBox 主要用于桌面环境和小型企业，因为它的安装和使用，相对于vmware 比较简单。
​    3）前期高额的费用、降低硬件利用率、更大的错误影响面、实施配置复杂，管理复杂、一定的限制性

### 46、聊下对证书的理解CA OV EV DV证书?

​    1）ca证书主要分为DV、OV和EV三个种类
​    2）域名型SSL证书(DV)：浏览器有https和小锁标示，能起到最基本的信息传输加密功能，验证最基本的域名管理权。适用个人，小微企业等网站，（当天签发）
​    3）企业型ssl证书(OV)：浏览器有https和小锁标示，在信息传输加密的功能上，增加了验证企业身份的功能。在证书内容中能显示中文或英文公司名称。适用企业官网、门户等网站。（3-5天签发）
​    4）增强型EV SSL证书：企业型证书的升级版，在原有加密性及验证身份的基础上，加强了防假冒网站功能。拥有独一无二的绿色地址栏及地址栏公司名称显示，也因此具有能帮助网站提升形象以及增加网站体验度的功能。在功能和效果上较之企业型更强大更多样化。适用金融、电商等网站。（3-7天签发）

### 47、tcpdump dest主机为192.168.1.1 ued端口为80的数据，同时将输出结果保存输出到tcpdump.log?

​    1）tcpdump -i eth1 '( (port 80) and (dst host 192.168.1.1))' > tcpdump.log

### 48、Linux服务器开不了机，如何排查故障?

​    1） 硬件故障
​    ​2)   内核问题导致无法启动
​    3)   文件系统的故障
​    4)   其他软件问题

### 49、BIOS与UEFI区别，以及gpt分区表与mbr区别?

​        1） UEFI是“统一可扩展固件接口”的缩写，而BIOS是“基本输入输出系统”的缩写。这是两种不同的技术标准，它们的设计理念和实现方式也不同。UEFI是一种基于模块化的固件系统，可以在启动过程中加载各种模块。与之相比，BIOS是一种单一的固件系统，只能执行预定义的操作。因此，UEFI具有更高的灵活性和可扩展性，可以支持更多的硬件设备和操作系统。

​        2） MBR分区表的硬盘最多能划分4个主分区磁盘，并且MBR最大仅支持2TB的硬盘，但拥有最好的兼容性。GPT分区表类型不受分区个数、硬盘大小的限制，最大支持18EB大容量（EB=1024 PB，PB=1024 TB），而且GPT是一种新的硬盘分区标准
